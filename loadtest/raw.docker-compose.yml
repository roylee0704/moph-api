version: "3.7"

services:
  k6:
    image: loadimpact/k6
    ports:
      - "6565:6565"
    volumes:
      - .:/scripts
    command: "version"
    environment:
      - API_URL=https://cvp1.moph.go.th
      # manually run get token api to obtain MOPH_OAUTH_TOKEN
      # hardcode these 2 values to get real speed
      - MOPH_OAUTH_TOKEN=eyJhbGciOiJSUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJBZG1pbl8xMTc3MF8yQDExNzcwIiwiaWF0IjoxNjM0MDQ3NTkyLCJleHAiOjE2MzQwNTgzOTIsImlzcyI6Ik1PUEggQWNjb3VudCBDZW50ZXIiLCJhdWQiOiJNT1BIIEFQSSIsImNsaWVudCI6eyJ1c2VyX2lkIjozMTQ1OSwidXNlcl9oYXNoIjoiMjlGMEQzRTY0ODlFM0ZCMkFGNDlBQzZCMkUxOUUyMTE3RTQ1OEVGNEVFRUQyMEJFNDRDMTNEMTgzREUxRTAwRDhDQzlGMkE3MUQiLCJsb2dpbiI6IkFkbWluXzExNzcwXzIiLCJuYW1lIjoi4LiZ4Liy4Lii4LiT4Lix4LiQ4Lin4Li44LiS4Li0IOC4quC4suC4oeC4sOC4hOC4sOC4nOC4pSIsImhvc3BpdGFsX25hbWUiOiLguYLguKPguIfguJ7guKLguLLguJrguLLguKXguJ7guKPguLTguYnguJnguIvguYzguKrguLjguKfguKPguKPguJPguKDguLnguKHguLTguYLguKPguIfguJ7guKLguLLguJrguLLguKXguJfguLHguYjguKfguYTguJvguILguJnguLLguJTguYPguKvguI3guYgiLCJob3NwaXRhbF9jb2RlIjoiMTE3NzAiLCJlbWFpbCI6InBzdXZfZGNjQHByaW5jaGVhbHRoLmNvbSIsImNpZF9oYXNoIjoiIiwiY2lkX2VuY3J5cHQiOiIiLCJjbGllbnRfaXAiOiI0NS40MC41NC4xOCwgMTcyLjY4LjI0My42LCA5NC43NC4xMTYuMTg5Iiwic2NvcGUiOlt7ImNvZGUiOiJJTU1VTklaQVRJT05fVklFVzoxIn0seyJjb2RlIjoiSU1NVU5JWkFUSU9OX1VQREFURToxIn0seyJjb2RlIjoiSU1NVU5JWkFUSU9OX1BFUlNPTl9VUExPQUQ6MSJ9LHsiY29kZSI6IklNTVVOSVpBVElPTl9EQVNIQk9BUkQ6MSJ9LHsiY29kZSI6IklNTVVOSVpBVElPTl9TTE9UOjEifSx7ImNvZGUiOiJJTU1VTklaQVRJT05fUVVPVEE6MSJ9LHsiY29kZSI6IklNTVVOSVpBVElPTl9SRVBPUlQ6MSJ9LHsiY29kZSI6IklNTVVOSVpBVElPTl9SRVBPUlRfRVhDRUw6MSJ9LHsiY29kZSI6IklNTVVOSVpBVElPTl9DT01QQU5ZOjEifSx7ImNvZGUiOiJJTU1VTklaQVRJT05fQUVGSV9VUERBVEU6MSJ9LHsiY29kZSI6IklNTVVOSVpBVElPTl9TTE9UX01BTkFHRVI6MSJ9XSwicm9sZSI6WyJtb3BoLWFwaSJdLCJzY29wZV9saXN0IjoiW0lNTVVOSVpBVElPTl9WSUVXOjFdW0lNTVVOSVpBVElPTl9VUERBVEU6MV1bSU1NVU5JWkFUSU9OX1BFUlNPTl9VUExPQUQ6MV1bSU1NVU5JWkFUSU9OX0RBU0hCT0FSRDoxXVtJTU1VTklaQVRJT05fU0xPVDoxXVtJTU1VTklaQVRJT05fUVVPVEE6MV1bSU1NVU5JWkFUSU9OX1JFUE9SVDoxXVtJTU1VTklaQVRJT05fUkVQT1JUX0VYQ0VMOjFdW0lNTVVOSVpBVElPTl9DT01QQU5ZOjFdW0lNTVVOSVpBVElPTl9BRUZJX1VQREFURToxXVtJTU1VTklaQVRJT05fU0xPVF9NQU5BR0VSOjFdIiwiYWNjZXNzX2NvZGVfbGV2ZWwxIjoiJzExNzcwJyIsImFjY2Vzc19jb2RlX2xldmVsMiI6IicnIiwiYWNjZXNzX2NvZGVfbGV2ZWwzIjoiJyciLCJhY2Nlc3NfY29kZV9sZXZlbDQiOiInJyIsImFjY2Vzc19jb2RlX2xldmVsNSI6IicnIn19.H1ofKVXqrbKyoNogliZJAC7aX0PVnTmLm9IHTdbgzbsIfeYdqdsoAIy0lozDyh0I82aWk7hwCldGLg3PdznfmMnNNFNI0GNWIrFbVcfTjmqw6hcEzJ2wVl7GrpE_Bmuu6mSvCoNMT1SIwNFi0MyXWyIvyWtUfVWFmwCu2MV0gF9F9nUETomnF0EbVGqK4p4_K9PDpXi1JE_O1xWj8-Y2SHPz3eP2d4fvUf5FWgBoDtS6qOyDYUYsbLzZ-B-57ehV2I9jZtYYxaCKKvW0VCMI8VsX4YKbWsayXGqcwFlnhriac3DiioZ48fQL93RxDkoO5P3qIugwZnDt_ccQIumGMR2J9hdIGfNvur1NtEGDVL-eOLlBaT84JVT83hJbmYH0TXLoZ7p3NzuPp5KzNIkMsZeOieCi9tcvCuUncz_8sOAXJTuzMQ66ZvJLClWoFZAh4q7inoXeDZDvlvl2ie_OE5na8WM3XSVyXkys9Jzfc1Xw9F6phpYXG1RUmMZYg2kz6BB30giaGXxV4yAzIDbvTUHXNCl65FSvYVVxVmGkRR2vYl2laq-3Ug_NsIz-WfzSnJPftmk50AB3bljcIcXJM2uMJVPF-GRtc09CCx9cPMY0MskAzKC8XO-pzgNO8gXrN5wbLXf-LS2XxaU7kjpZefgeSQ3t8SAiQuEP_aG1LnU
      - MOPH_HASHED_PASSWORD=27F2343E512C17DAC1F5EA86D0321709B111EC57FAC7C4D9E2D0B21A199A12FA
    env_file:
      - ../.env
